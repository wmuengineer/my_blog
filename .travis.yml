language: ruby
rvm:
- 2.2.5
before_script:
- cp config/database.yml.travis config/database.yml
- psql -c 'create database blog2_test;' -U postgres
script:
- bundle exec rake db:migrate
- bundle exec rake
notifications:
  slack: nird:BqbUGQOgg2pFAVDIX0FZVh4l
env:
  global:
  - secure: NmNyy0yafpa+GQ+4BRN5qBdzUsHB6iRT8gqmVGP9dhzZuR2XLWMV0Ap8Etz+YOvdeA7vc/lWB8KB8IIO6ag5EIq6i4R7YM5wm3AXvL1LKN5hiKwv0dcIIfTv7pVISlVwaRLVEiJkfbAGCD63HZq5/Qze/ueEYaFI24wIjWWmxu0ff5Ww5a/hzho0kHv9F/VFZAfVtEE6PzYbofB8dmaJ8GjV/KHNtMgRteDmZpLj56d30r3uQUQkq+xd1u7Tq5qH0IQvL1qtAYchUms4urKbDUYWJ/qy6MDmnEURKB+CpDyX7KmMFnuHIAhOGnCroLdhY43BRMT/m8HxNH9VhfZHaowOUdQsNKQqJN19L7m5QoT9khO19euH1m/D//UZnCn7PP8wFl4zIQpx6gUiIlsDapiCiG8VVM5RmQKVEjPKb9SrFcrA9PJ+ci4IC9gacUe5SoLApCDhVHbIsLRcAkD61xU4IVFlSd3rtC8Vj6acN+iCpAv6P8BckE/X5CK3Kp5N0YJz2oe0L/y7oZ8v31G7lWJtI9oxlfBY97Z3KSYy85hbjr3KZWuXS9dNg75sFkmDSon9j6d43e/azvG6RvXBCt2s0GIcwtCY8+CP/BBcdMtqNnEKw79dnDqlPNTNmWytivlhu2WeRHwJ4+bSWUpZNpzzq4qgf1tHP8F2CvdeV9E=
  - secure: 5QqniYfeEfgevPTbEeNMlK+9R17tVA/hY2GnDVsrlum2mFZuw5h5arJQ5nJRaeRn4UKMixRwk2M5a3l9YSxMhH+WqYLfj0RQhXvpDfiTxIHABiKdH4u7u6cBzHajnQn6piEiSwenpvxugu7PVLbt+E5T9I3qt5wrC56H1nNXMdaapDrWChtBxjcbvRG5fgSk2dhdVRCMtuckF1/xqIh4hSBs+teeVtJyqhpD78aptf6QMVT4678pMey/ZAx7GKPeh5tTltlPo3tMuMypTN/6BLfza4Gg7gRyN4+41e0U1Y4VsMu9+uFAOmcb+L/K4l4La2Iq120Epab+JxAbYL7a6IBhrV8h8bYmoo3DEfCo4/Vbr+5ms3Qxj4D2BSgFX9UO6+N7EPYv+PxvbKOlWukINSehztVjT0KzPpxL0OtUojeRCW+IK1J4fTKPkWTMQXSXTZeKah7+nd/3nQqtxXJI0nXbw5eo1ya9Iky43VqGQbbQBIiVXwL7mQZuvPfCMb2ZvI2+6lg5p6HP2Fim4tNoPtFqv4rwc7pDgVLdxEl1ZIDmHR7ouD105GzRJXf5IHsq4u1tFgBLRyWAty7C3OESLMICfzcP0UxFknvFEScJIxNx8ESVxiD2Uu0IoB0GpHDclmREi+zkK0OqWQ0T4ZGoytTCTazH/INqWfR7oNyqHbw=
  - secure: tAkCkd9ORVLJml5EiQ5i704UsejRHjNxj+N+q5db1aRWX1OK+cKOLZG/2hAyguThdTXmuDn48JMh7JHqXhM60qN2GbFscamxVROvbZrYHdNUXH56cHfUYJXiM9ntx46zKU7O8KKZ79NChQyWHGrwjYZUPRTrGgSKVQvyrLA6pNPRlX94xj3irXk/Bz2O7hxZ0z6i01rwSg9icN8nKkKVoGeqbGqZ5c8PWZllAS8E0dYEde20Cb2uAEwJ7CMasmYeEtWUDR6ko0i2bxS3aPfcNg5PIRjVlH12s+E5QWKhd5c1LZ7kevmWttsNFENczj1JSYNp9+3IAft7Qj6i89XrdXjpZSd3aKg0Zb8E5dPNOWY7KEeFnz/NF3hTRUxJXvetbDffCOtVf6fx6sn916i+NwR1hAiGbH3ez0rBl54hZ5RrMOhFHLrX52NR8/oAVWat1qZWUcmbHswi1c/bdDCOwj65pvDwNLmEieo4OPjCGaR7zlY5/X+Z16kxSLaAeHAauVhztzwXsLRjA5nKOyLPk0Pmhy5cMrGmCx9usmYTRYZzhN3QULsum08qOgNeKqDuhrUQDep0YOaj5Pp8k9OHUcEsmkiiB2pv1PX9CsZirtaVmKMxGHoUuNeLMdMS5b5fCAt+Dh5KZvBVDKTx9M9C/n62zWJ8pa6Rozk8P15mMxI=
  - secure: DUU1sB1zLmHLcn3Houc+6JgXyOFVQD7dCjDcK3f0aC30J+F//kTumO+/fo5ws8D9U5yryd9c/9wxWBztUGL7YVQKGifEn73DCblQ776GjQTGoL5zNMBNaoq79JRKc/2naYAuAmX4zf9YEtXh/YLcgx0TUd5G2ieclejefVDoC97kfUsoE0lG1QKplDbs/+I8irFfojsmRNl8BjV/a3ia7xWg6ae24mIImraktFJQHVcQNut2IwiANUZHXDoHO0rPi7NTHjx0CZNAeJsf09qu5HTseqpXWnTZAStTiaoyJaCNEcTm136LnXzUqqBkvFy72xdOe3E5v29yJJhLjsgjwH5GX3QABtQYx/ddCVRIRhFFTsJ4FHrupdK03Zt5KiGNRyBjc+xQlm+eaGtFs40sAAEBnmqGB0Ls5Rirwib7BzsHFI/iTnHoti+hRsHO08XYLLHwDKr2tdfGne2AEJKqQDlu6s4QO1Vbv9tcY/cxvLiIHeVq/64kb9O6E/HqfeyDPeFPn1JUbWFbGJdQpl8yth3OUVU2kLdBiW7c/YxLOF4HsnpTJI8x38fngM29L9oYWl7uMKYRY8jq6ykEUBkO1ZjEKyhwDf+S9qVNlbOfyEOL/L6GNBwvXklzv07FRXHpv2SqMDCKJenkGzpCXkZWaPldP85Fc/HE8vlECaMKYT4=
  - secure: 5LZnE7o9TujOSdy4itjEQnB+FGDb020l1D9fsEYyqhT7/wwWoBHvrskNFSXwljJvJu/zGONZwxZGoei1DmJ9w9yeu01lF0dXth7mr/CQu5W6KAjyxZAKEmlSjVjvLktO7p37rU37yLYFKSYDmnmhbLlXwz/Cc5iSHJJxyj31N8OAroHJee0Ktt+iaDLF0ezzj5tJ3akD/YvCEoSzgsXpGvt5v0gKTYEexg8ErMCtMUTk/mox0HalPwtUATwwts+Xn5nUonEf6AeVKF//zrtgxI5J8+wJmAtttCF/L35qV1K1xXOSaX3gbG7kZY6iGadG+hQZWbISf/7djP1CIrzszC3aYx7ImlQy8STV8aMdvoBtHXIt7llhrYF+QOXBxQW8Izg8G3COGJKX+bh2IRw2lRv70ghxemK6B/GNrOYp44WN9DAo1+C30VSUkDwXa7e3dfh0aHwCDk2HcHrZKr00jmk4wP/wvFMnF3x7hQCT1DPzfaf4f9/EF0mIIEiMEBnEKNmEV2wNTMLTxO6wU6BScbE6QdWRxowCH2DPyAcWOvQWYNDlMB9ixYmebfj/ISKBFErse7djRwQhHPrhoiYie69eKysAku/11BqmoMrND3Qg8OyElF4va3GJLYpSCi+jFi5M2ugKFOlKRsqZGMkudP9ZVmpV8Wjy1ia6oTOFaH4=

deploy:
  edge: true
  provider: cloudfoundry
  api: https://api.system.platform.nirdhost.com
  username: adamb
  password:
    secure: vEiNxRcpUY8vCvgG12IX27VErhMxQrzcpgbc77Ug8PEepWB9C1KcFT2L6ucdY5zuNWG/SP8qhFVNlQv0qijl46r3WpMIHoNy1S98RDhpMa2pWNMxCGmhEvR638vDlpOdDXorKThaiyQa318N9cOhu8EeVEhM2gNmDoIY/qENJPJLpe32TplQ1TwYPB266qV/zSG3ar3jHzdm4iN+3u/zDy5ymPEfm0BQYYnb/UxhHZZjCTwd5QxiWvO1WueYtMQ0CkqZ+PSO/7JIfb710mHNeFFeVwP2uV0xoCsb4Rk6wm6Tvbi8rPbr+Gxkhn0g8EYZ+numxAFpJc5WwE5HzNCiJ1DrJuLHqaRxuxc4PXPy2ns7trTlZzs6t4vrCssioFunmEFhrTZT4TIkp9v7EKScjutuSfrOj2dZG9hkyCUOM+CRB9LML2NAYGxmqHX5uqMSmhIpg6nbNRvb1jkvcH/N9yFoTBZFZKzi4JEoEDfs1XGX0VKxohi3nLqv3jmP0HS27a9ZCOJf2mdtgzsgiEDxrg+3pjm5e/nvatctY4n6loHuXEJkqwLYk3M6yKA2HRoKsrjKyjQE6iec8AeEHJCGyh5lD9wkxSp7DabzStOzZ9BtbnLIkhqQ0Fha/NXb3mplpM/tCVTRneSbGN401iQwdDCClHDmrbDeDUcGc+185hw=
  organization: nirdhost
  space: pre-production
  on:
    branch: master
    repo: wmuengineer/my_blog

deploy:
  edge: true
  provider: cloudfoundry
  api: https://api.system.platform.nirdhost.com
  username: adamb
  password:
    secure: vEiNxRcpUY8vCvgG12IX27VErhMxQrzcpgbc77Ug8PEepWB9C1KcFT2L6ucdY5zuNWG/SP8qhFVNlQv0qijl46r3WpMIHoNy1S98RDhpMa2pWNMxCGmhEvR638vDlpOdDXorKThaiyQa318N9cOhu8EeVEhM2gNmDoIY/qENJPJLpe32TplQ1TwYPB266qV/zSG3ar3jHzdm4iN+3u/zDy5ymPEfm0BQYYnb/UxhHZZjCTwd5QxiWvO1WueYtMQ0CkqZ+PSO/7JIfb710mHNeFFeVwP2uV0xoCsb4Rk6wm6Tvbi8rPbr+Gxkhn0g8EYZ+numxAFpJc5WwE5HzNCiJ1DrJuLHqaRxuxc4PXPy2ns7trTlZzs6t4vrCssioFunmEFhrTZT4TIkp9v7EKScjutuSfrOj2dZG9hkyCUOM+CRB9LML2NAYGxmqHX5uqMSmhIpg6nbNRvb1jkvcH/N9yFoTBZFZKzi4JEoEDfs1XGX0VKxohi3nLqv3jmP0HS27a9ZCOJf2mdtgzsgiEDxrg+3pjm5e/nvatctY4n6loHuXEJkqwLYk3M6yKA2HRoKsrjKyjQE6iec8AeEHJCGyh5lD9wkxSp7DabzStOzZ9BtbnLIkhqQ0Fha/NXb3mplpM/tCVTRneSbGN401iQwdDCClHDmrbDeDUcGc+185hw=
  organization: nirdhost
  space: production
  on:
    branch: production
    repo: wmuengineer/my_blog
